<!doctype html>
<style>
html{min-height:100%;line-height:16px;font-size:13px;font-family:sans-serif;color:#333333;}
#playarea{position:absolute;top:0;left:0;bottom:0;right:0;margin:auto;width:640px;height:480px;cursor:none;}
#decoy{position:absolute;top:232px;right:344px;margin:0;text-align:right;}
#decoy a{cursor:inherit;}
#likelike{position:absolute;top:228px;left:297px;}
#pointer{position:fixed;visibility:hidden;pointer-events:none;}
</style>
<script>
var
DISTORTION_RADIUS = 240,
DISTORTION_X = -40,
DISTORTION_Y = 0,
DISTORTION_FUNCTION = function (r) { return Math.cos(r * Math.PI) / 2 + 0.5; };

var playarea = null;
var likelike = null;
var pointer = null;
var ox, oy;

function init() {
	playarea = document.getElementById('playarea');
	likelike = document.getElementById('likelike');
	pointer = document.getElementById('pointer');

	playarea.addEventListener('mousemove', move);
	playarea.addEventListener('mouseover', over);
	playarea.addEventListener('mouseout', out);
	likelike.addEventListener('mouseover', likeover);
	window.addEventListener('resize', resize);
	resize(null);

	addEventListener('keydown', down);
	addEventListener('keyup', up);
}

function over(e) {
	if (e.target == playarea) pointer.style.visibility = 'visible';
}

function out(e) {
	if (e.target != playarea) return;
	var comp = playarea.compareDocumentPosition(e.relatedTarget);
	if (comp & playarea.DOCUMENT_POSITION_CONTAINED_BY) return;
	pointer.style.visibility = '';
}

function move(e) {
	var cx = e.clientX;
	var cy = e.clientY;
	var dx = cx - ox;
	var dy = cy - oy;
	var dist = Math.sqrt(dx * dx + dy * dy);
	var ax, ay;
	if (dist < DISTORTION_RADIUS) {
		var v = DISTORTION_FUNCTION(dist / DISTORTION_RADIUS);
		ax = v * DISTORTION_X;
		ay = v * DISTORTION_Y;
	} else {
		ax = ay = 0;
	}
	pointer.style.top = cy + ay + 'px';
	pointer.style.left = cx + ax + 'px';
}

function resize(e) {
	ox = playarea.offsetLeft + playarea.offsetWidth / 2;
	oy = playarea.offsetTop + playarea.offsetHeight / 2;
}

function likeover(e) {
	pointer.style.visibility = '';
}

function down(e) {
	if (e.shiftKey) {
		playarea.style.backgroundColor = '#f0f0f0';
		playarea.style.cursor = 'crosshair';
	}
}

function up(e) {
	if (!e.shiftKey) {
		playarea.style.backgroundColor = '';
		playarea.style.cursor = '';
	}
}
</script>
<body>
<div id="playarea">
	<p id="decoy">feel free to click <a href="/">here</a></p>
	<iframe id="likelike"    src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fhtmlpad.org%2F&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=35"   scrolling="no" frameborder="0" style="border:none; overflow:hidden;   width:450px; height:35px;" allowTransparency="true"></iframe>
	<img id="pointer" src="http://i.imgur.com/EWmYMN2.png">
</div>
<script>init();</script>
